1、tunk模块的创建

````javascript
// 一个用户管理模块
import {create, action} from 'tunk'
// 创建模块类实例
@create
class userAdmin {
	constructor(){
		// 定义存储到store相关节点的状态字段 list
		this.state = {
			list:[]
		}
	}
	@action
	fetchList(param){
		const res = this.request ...
		// 将list新状态更新到store
		// totalCount由于未在constructor中被定义为状态字段
		// 因此totalCount不会被保存到store
		return {list: res.list, totalCount: res.total_count}
	}
	@action 
	addUser(){
		...
	}
	// 非action方法
	someFunc(){
		...
	}
	...
}

````

> 状态管理模块与视图组件是并非一对一的关系，所有状态管理模块共同组成了一个数据服务层，视图组件可以订阅任意模块的状态数据。

2、以vue作实例说明，让视图组件订阅上面模块定义的list状态字段，以及调起该模块的Action fetchList


````javascript
// vue视图组件（tunk-vue）
<template>
  <ul>
  	<li v-for="item in list"></li>
  </ul>
  ...
</template>
<script>
export default {
	// 状态订阅配置
	state: {
		// list 是userAdmin定义的状态字段
		// 组件被初始化后this.list将被注入当前 userAdmin.list 的状态
		list: 'userAdmin.list'
	},
	data() {
		return {
			count: 0
		};
	},
	created(){
		this.loadUserList();
	}
	methods: {
		async loadUserList() {
			const result = await this.dispatch('userAdmin.fetchList');
			// userAdmin模块的action：fetchList ，返回了{list, totalCount};
			// 虽然totalCount没被保存到store
			// totalCount仍然可以在 this.dispatch('userAdmin.fetchList') 返回的结果中使用
			// 同时在state配置的订阅状态也会被注入
			this.count = result.totalCount;
		}
	}
}
</script>
````
3、下面是tunk在程序入口文件的初始化

````javascript
import Vue from 'vue';
import tunk from "tunk";
import tunkVue from "tunk-vue";

// tunk使用tunk-vue组件
tunk.use([tunkVue]);
Vue.use(tunk);

// 引入状态管理模块即可创建状态管理模块
//import './userAdmin';
// 也可批量引入（通常我们都把模块js放到统一目录下，如：modules）
var modules = require.context('./modules', true, /\.js$/);
modules.keys().forEach((item) => {
  modules(item);
});

````
