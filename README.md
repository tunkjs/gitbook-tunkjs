
<div style="text-align:center; margin-bottom:50px;">
<img style="width: 200px;" src="https://github.com/tunkjs/gitbook-tunkjs/blob/master/img/logo1x.png?raw=true" alt="tunk logo">
</div>

## tunkjs是什么
简单来说，tunkjs是一个应用状态管理器，但不止是状态管理器。对应用架构来说，它提供了一个让数据逻辑与交互逻辑完全解耦的模式。

## 初衷

你的app可能并不需要状态管理。而需要状态管理的项目中实际应用中，很多时候是某些场景下并不需要状态管理。这些场景的代码组织常常显得比较尴尬，不是违背代码组织的一致性，就是不符合状态管理的必要性。

开发完了wap版本，需要再开发微信小程序版本或者嵌入到原生APP的RN版本，如何做到最大化的复用wap版本的代码？

数据处理逻辑与交互逻辑分离可以很好地解决这个问题。交互逻辑通常直接依赖不同平台的视图实现，而数据处理逻辑可以做到跟交互逻辑完全解耦，数据处理逻辑很大程度上是可以直接复用的。

逐渐深入React+Redux开发一些项目，越发觉得很多成本是花在为了满足框架要求而编码，并不能很好的专注于业务逻辑的开发，既降低了开发效率，也提高了开发维护成本。

引用别人的话：如果你总是想着“状态管理”，觉得自己要解决“状态管理”这个很严肃的问题，你大概就会在错误的道路上越走越远。

视图层之外需要解决的不只是状态管理问题，架构合理性问题、编程体验问题、学习成本问题等是前端工程化需要解决的问题。架构性框架作为工程化核心部分，应该以使用者为中心，简化架构、简化api、简化组件模块通信方式、减轻框架自身的存在感，让使用者更好地专注于业务逻辑的开发。这正是tunkjs存在的价值及努力的方向。

## 要点

1、状态数据统一存储，一个模块对应着状态树的一个节点，一个状态节点仅能被对应的模块更新

2、视图组件并不直接依赖tunk模块，而是相当于面向一个数据服务进行通信

3、你需要面向数据逻辑对象来设计状态管理模块类，将不同数据源的数据处理逻辑集中到状态管理模块类里，视图组件只负责内容展示和交互处理

4、视图组件可以轻松订阅不同模块的状态数据，也可以通过调起action的方法获得其返回的所有数据。

> 你不需要将所有用到的数据都视定义为状态数据，不会被复用的数据不应定义为状态 
> 
> 由于可获得action返回的所有内容，你不需要为了使用一次的数据做繁琐的状态数据定义与绑定操作
> 
> 推荐你将所有的数据处理逻辑都放在在模块内，这样可以减轻视图层的复杂度，视图层仅负责内容展示及交互的逻辑处理
> 

5、tunk模块完全跟视图层无关，可以直接配合不同的视图层的实现，譬如wap版开发完，复用tunk模块，只需要实现小程序的视图层即可完成小程序的开发

## 安装

````javascript
npm install tunk -S
````
除了tunk一般你还需要安装**视图框架绑定组件**

跟vue绑定

````javascript
npm install tunk-vue -S
````
跟react或react native绑定

````javascript
npm install tunk-react -S
````
跟微信小程序绑定

````javascript
npm install tunk-wechat -S
````

## 版本规则

tunk跟组件版本同一大版本号的不同子版本API都兼容，同一大版本号不会出现API的改变。

> 譬如：

>tunk 3.5 tunk-vue 3.1 tunk-strict 3.0 和谐配合

>tunk 3.0 跟 tunk-vue2.0 可能无法工作

## 要点

tunk的工作是为视图层提供一个数据服务，而状态管理只是这个数据服务的一部分，因为很多场景下从数据源获得的“用完即焚”的数据并不应该被持久化存储。

你需要面向业务数据逻辑对象来设计状态管理模块，并且仅能由所属模块定义的Action去更新所属模块定义的状态，而模块实际不存储状态数据，这样的机制利于代码职责的划分及控制不可预知的状态变化。

对于视图组件来说，tunk提供的是一个数据服务，组件可以轻松订阅需要的数据，也可以主动获取Action返回的处理结果。





